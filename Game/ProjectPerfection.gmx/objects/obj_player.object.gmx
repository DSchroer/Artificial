<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_player_walk</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1</depth>
  <persistent>-1</persistent>
  <parentName>obj_entity</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
player_init();
player_compute_stats();
inventory_init();

window_set_cursor(cr_none);
cursor_sprite = spr_aim;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Dialog delay 

var dialog = story_get_dialog();
if(dialog != -1)
{
    story_update();
}
ui_textbox_queue(dialog);
ui_flash_textbox();

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Cube related lore. Also hub teleporter spawn
instance_create(room_width / 2, room_height / 2 - 192, obj_hub_teleporter);
ui_textbox_queue("You feel a strange sensation. `br |red Your base health has increased by 100. `br |aqua Your base shield has increased by 75.");

if(obj_progress.cube_parts == 1)
{
    story_advance(1);
}
else if(obj_progress.cube_parts == 2)
{
    story_advance(1);
    story_advance(1);
}
else if(obj_progress.cube_parts == 3)
{
    story_advance(1);
}
else if(obj_progress.cube_parts == 4)
{
    story_advance(1);
}




</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Drop weapons
/*
for(var i = 0; i &lt; 2; i++)
{
    var out = inventory_swap(self, i, -1);
    
    if(out != -1 &amp;&amp; is_array(out))
    {
        var dx = random(64) - 32;
        var dy = random(64) - 32;
    
        var item = instance_create(x + dx, y + dy, obj_item);
        item.data = out;
    }
}
*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_create(0,0, obj_fade_out);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>current_health = max_health;
with(obj_progress)
{
    progress = 0;
}
x = 1600;
y = 320;

dead = false;

with(obj_camera)
{
    zoom = 1;
    current_zoom = 1;
    zoom_speed = 0.25;
}

if(room == rm_tutorial)
{
    room_goto(rm_tutorial);
    exit;
}

//inventory_swap(self, inventory_slot.weapon1, -1);
//inventory_swap(self, inventory_slot.weapon2, -1);

with(obj_level)
{
    instance_destroy();
}
 

ui_textbox_clear();
room_goto(rm_hub);



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
isomorphic_set_depth();

entity_dampening();
entity_move_input();                                                                               

if(is_paused())
{
    player_render_self();
    exit;
}

if(inventory[selected_slot] != -1 &amp;&amp; is_array(inventory[selected_slot]))
{
    inventory[selected_slot] = player_update_gun(inventory[selected_slot]);
}

if(!dead)
{
    gun_angle = point_direction(x, y - 64, mouse_x, mouse_y);
}

gun_recoil = min(gun_recoil, gun_base_dist);
gun_dist = gun_base_dist - gun_recoil;
if(gun_recoil &gt; 0)
{
    gun_recoil-=5;
    gun_recoil = max(gun_recoil, 0);
}

player_update_shield();
debug_show_string("fps: " + string(fps));

if(keymap_check(keycode.interact) &amp;&amp; !dead)
{
    var inter = interact_any(128);
    if(inter == noone)
    {
        var obj = instance_place(x, y, obj_item);
        var data = -1;
        if(obj)
        {
            data = obj.data;
        }
        var out = noone;
        if(is_gun(data))
        {
            out = inventory_pickup_weapon(data);
            if(obj_progress.tutorial &lt; 50)
            {
                obj_progress.tutorial++;
            }
        }else if(is_shield(data))
        {
            out = -1;
            player_activate_shield();
            if(obj_progress.tutorial &lt; 50)
            {
                obj_progress.tutorial++;
            }
        }
        
        with(obj)
        {
            instance_destroy();
        }
        if(out != -1 &amp;&amp; is_array(out))
        {
            var item = instance_create(x,y, obj_item);
            item.data = out;
        }
    
    }else{
        interact_trigger(inter);
    }
}

if(invincible &gt; 0)
{
    --invincible;
}

if(!open_workbench &amp;&amp; !ui_textbox_open())
{
    if(keymap_check(keycode.fire) &amp;&amp; !dead)
    {
        player_fire();
    }
    
    if(keymap_check(keycode.reload))
    {
        inventory[selected_slot] = player_reload(inventory[selected_slot]);
    }

}

if(keymap_check(keycode.escape))
{
    if(!is_paused() &amp;&amp; room != rm_transition)
    {
        instance_create(0,0,obj_pause);
        open_workbench = false;
    }
}

entity_collision();

player_set_sprite();

player_render_self();


// Component tutorial
if(!save_get_value(obj_save_data, "components_tutorial", false) &amp;&amp; save_get_value(obj_save_data, "components", 0) &gt; 0)
{
    if(!level_stub_find(obj_enemy))
    {        
        save_set_value(obj_save_data, "components_tutorial", true);              
        tutorial_components();        
    } 
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(!dead)
{
    var delay = 1;
    if(obj_progress.tutorial == 100)
    {
        ui_textbox_queue("Project iteration " + '"I"' + ": Status Failure. `br Eliminate Defect: |red Free Will. ");
        delay = 2;
    }
    obj_progress.tutorial = max(obj_progress.tutorial, 101);  
    save_flush(obj_save_data);
    
    dead = true;
    alarm[0] = 60 * 4 * delay;
    alarm[1] = 60 * 3 * delay;
    alarm[2] = 60 * 2 * delay;
    with(obj_camera)
    {
        zoom_speed = 0.03;
        zoom = 0.25;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>player_take_damage();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>room_speed = 60;

if(instance_number(obj_spawn_player) &gt; 0)
{
    x = obj_spawn_player.x;
    y = obj_spawn_player.y;
}

with(obj_camera)
{
    x_target = other.x;
    y_target = other.y;
    x = other.x;
    y = other.y
    zoom = 0.7;
    current_zoom = 0.7;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(!is_paused())
{
    ui_draw();
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
draw_outline_begin();
draw_outline_update(surface, true);

if(surface_exists(surface))
{
    draw_surface(surface, x - base_x, y - base_y);
}
draw_outline_end();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="116">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>room_goto(rm_sandbox);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="10" enumb="82">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
